{% extends 'base.html' %}

{% block content %}
<header>
    <h1>CareerHive</h1>
    {% if current_user %}
    <h3>Welcome to CareerHive {{ current_user['first_name'] }}</h3>

    <section class="controls">
        <!-- add in a search bar -->

        <form action="/sessions/delete" method="POST">
            <button>Log out</button>
        </form>

        <form action="/jobs/new">
            <button>Add job</button>
        </form>
    </section>
</header>

<main class="jobs">
    {% for job in jobs %}
    <section class="job">
        <img src="{{ job['logo'] }}" alt="">
        <h2>{{ job['title'] }}</h2>
        <h3>${{ job['salary'] }}</h3>
        <p>Company: {{ job['name'] }}</p>
        {% if job['fulltime'] == 'true' %}
        <p>Employment type: Full-time</p>
        {% else %}
        <p>Employment type: Part-time/ Casual</p>
        {% endif %}
        <p>Location: {{ job['city'] }} ({{ job['zipcode'] }}), {{ job['country'] }}</p>
        <p>Contact: {{ job['author'] }}</p>
        <p>Job description: {{ job['content'] }}</p>
        <p>Date posted: {{ job['date'] }}</p>
    </section>

    <section class="controls">
        <form action="/jobs/{{ job['id'] }}/edit">
            <button>Edit</button>
        </form>

        <form action="/jobs/{{ job['id'] }}/delete" method="POST">
            <button>Delete</button>
        </form>

        <form action="/jobs/{{ job['id'] }}/save" method="POST">
            <button>Save</button>
        </form>
    </section>
    {% endfor %}

    {% for job_data in api_jobs %}
    <section class="job">
        <img src="{{ job_data['logo'] }}" alt="">
        <h2>{{ job_data['title'] }}</h2>
        <h3>${{ job_data['salary'] }}</h3>
        <p>Company: {{ job_data['name'] }}</p>
        {% if job_data['fulltime'] == 'true' %}
        <p>Employment type: Full-time</p>
        {% else %}
        <p>Employment type: Part-time/ Caual</p>
        {% endif %}
        <p>Location: {{ job_data['city'] }} ({{ job_data['zipcode'] }}), {{ job_data['country'] }}</p>
        <p>Contact: {{ job_data['author'] }}</p>
        <p>Job description: {{ job_data['content'] }}</p>
        <p>Date posted: {{ job_data['date'] }}</p>
    </section>

    <section class="controls">
        <form action="/jobs/{{ job_data['id'] }}/save" method="POST">
            <button>Save</button>
        </form>
    </section>
    {% endfor %}
</main>
{% else %}
<section class="access">
    <form action="/users/new">
        <button>Sign up</button>
    </form>

    <form action="/sessions/new">
        <button>Log in</button>
    </form>
</section>
{% endif %}
{% endblock %}