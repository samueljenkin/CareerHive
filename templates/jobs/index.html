{% extends 'base.html' %}

{% block content %}
<header>
    <img src="/static/images/CareerHive-logos.jpeg" alt="">
    <h1>CareerHive</h1>
    {% if current_user %}
    <h3>Welcome to CareerHive {{ current_user['first_name'] }}</h3>

    <section class="controls">
        <form action="/sessions/delete" method="POST">
            <button>Log out</button>
        </form>

        <form action="/jobs/new">
            <button>Add job</button>
        </form>

        <form action="/jobs/stored?stored=applied" method="POST">
            <button>View applied</button>
        </form>

        <form action="/jobs/stored?stored=saved" method="POST">
            <button>View saved</button>
        </form>

        <form action="/jobs/stored?stored=viewed" method="POST">
            <button>View history</button>
        </form>

        <form action="/jobs/stored?stored=reported" method="POST">
            <button>View reported</button>
        </form>
    </section>

    <section class="filters">
        <h3>Filters</h3>
        <form action="/jobs/search" method="POST">
            <label for="">Search:</label>
            <input type="text" name="searched">

            <label for="employment_type">Employment Type:</label>
            <select name="employment_type" id="employment_type">
                <option value="None">Any</option>
                <option value="true">Full-time</option>
                <option value="false">Part-time</option>
            </select>

            <label for="salary">Salary:</label>
            <select name="salary" id="salary">
                <option value="None">Any</option>
                <option value="0 29999">$0-$29,999</option>
                <option value="30000 59999">$30,000-$59,999</option>
                <option value="60000 89999">$60,000-$89,999</option>
                <option value="90000 119999">$90,000-$119,999</option>
                <option value="120000 149999">$120,000-$149,999</option>
                <option value="150000 999999">$150,000+</option>
            </select>

            <button>Filter Jobs</button>
        </form>
    </section>
</header>

<main class="jobs">
    {% for job in jobs %}
    <section class="job">
        <img src="{{ job['logo'] }}" alt="">
        <h2><a href="/jobs/{{ job['id'] }}/view">{{ job['title'] }}</a></h2>
        <h3>${{ job['salary'] }} AUD</h3>
        <p>Company: {{ job['company'] }}</p>
        {% if job['employment_type'] == 'true' %}
        <p>Employment type: Full-time</p>
        {% else %}
        <p>Employment type: Part-time</p>
        {% endif %}
        <p>Location: {{ job['city'] }} ({{ job['zipcode'] }}), {{ job['country'] }}</p>
        <p>Contact: {{ job['contact'] }}</p>
        <p class="overflow">Job description: {{ job['content'] }}</p>
        <p>Date posted: {{ job['date'] }}</p>
    </section>

    <section class="controls">
        <form action="/jobs/{{ job['id'] }}/view">
            <button>View</button>
        </form>

        {% if current_user['id'] == job['user_id'] %}
        <form action="/jobs/{{ job['id'] }}/edit" method="POST">
            <button>Edit</button>
        </form>

        <form action="/jobs/{{ job['id'] }}/delete" method="POST">
            <button>Delete</button>
        </form>

        {% else %}

        <form action="/jobs/{{ job['id'] }}/apply" method="POST">
            <button>Apply</button>
        </form>

        <form action="/jobs/{{ job['id'] }}/save" method="POST">
            <button>Save</button>
        </form>

        <form action="/jobs/{{ job['id'] }}/report" method="POST">
            <button>Report</button>
        </form>
        {% endif %}
    </section>
    {% endfor %}
</main>

{% else %}
<section class="access">
    <form action="/users/new">
        <button>Sign up</button>
    </form>

    <form action="/sessions/new">
        <button>Log in</button>
    </form>
</section>

{% for job in jobs %}
<section class="job">
    <img src="{{ job['logo'] }}" alt="">
    <h2>{{ job['title'] }}</h2>
    <h3>${{ job['salary'] }} AUD</h3>
    <p>Company: {{ job['company'] }}</p>
    {% if job['employment_type'] == 'true' %}
    <p>Employment type: Full-time</p>
    {% else %}
    <p>Employment type: Part-time</p>
    {% endif %}
    <p>Location: {{ job['city'] }} ({{ job['zipcode'] }}), {{ job['country'] }}</p>
    <p>Contact: {{ job['contact'] }}</p>
    <p class="overflow">Job description: {{ job['content'] }}</p>
    <p>Date posted: {{ job['date'] }}</p>
</section>
{% endfor %}
{% endif %}
{% endblock %}